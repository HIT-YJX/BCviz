Instructions 
==========
Instructions for the source code and related materials of the paper: <br>
`BCviz: A Linear-Space Index for Mining and Visualizing Cohesive Bipartite Subgraphs`
-----------


The source codes can be downloaded at "https://github.com/HIT-YJX/BCviz".<br>

The datasets can be downloaded at "https://github.com/HIT-YJX/BCviz-datasets".<br>

To run certain experimental scripts, the datasets **must be strictly named** as follows:<br>

**marvel**, **writer**, **BookCrossing**, **Team**, **Actor-movie**, **Twitter**, **WikiPedia**, **DBLP**.<br>

Please note that the DBLP dataset is compressed as DBLP.tar.xz. Before use, it must be extracted using the following command (in a Linux environment):
```shell
tar -xJvf DBLP.tar.xz
```

All of the algorithms in paper are implemented in C++. All experiments in paper are performed on a Linux server with an Intel Xeon E5-2620 v4 processor (2.10GHz, 8 cores) and 220GB of main memory.<br>

The plotting codes are implemented in python 3.11.4 and can be executed on Linux (Ubuntu 22.04.4), Windows 10/11 systems.<br>

# The descriptions of related files.

``construct-BCviz``: The source code of index construction algorithms.<br>

``search-BCviz``: The source code of search algorithms.<br>

``Index-results``: The index file that stores the index generated by the construction algorithms.<br>

``datasets``: Several datasets of bipartite graphs for maximum biclique search.<br>

``log``: Logs and results generated after running the construction and search algorithms.<br>

``experiments``: The scripts for the paper experiments.<br>


# I. construct-BCviz.

In the file "construct-BCviz", the code implements the construction algorithms of BCviz.<br> 
We have compiled the code to 'BCviz' with g++ 7.5.0, and you can run it directly.<br>
<br>
Please execute the following procedures within the "~/BCviz/construct-BCviz" directory on a Linux system.<br>


## 1. compile and run
To run the algorithm, first type ``chmod +x BCviz``, or enter ``make`` to complie the code.

Then, enter the command in the following format:

```shell
./BCviz [dataset] [problem_type] [algo_type] ([s_min]) ([t_min])
```

where<br> 
``[dataset]`` is a string denoting the name of a dataset, such as `marvel`.<br> 
``[problem_type]`` is a string denoting the types of the problem, which can be `MEB`, `MVB`, and `MBB`.<br> 
``[algo_type]`` is a string denoting the types of the algorithm, which can be `BCviz`, `BCviz+`, and `BCviz-`.<br> 
``([s_min])`` is an optional positive integer, which is the minimum threshold on the first vertex set of bipartite graph. The default value is `3`.<br> 
``([t_min])`` is an optional positive integer, which is the minimum threshold on the second vertex set of bipartite graph. The default value is `3`.<br> 


### As an example:

```shell
./BCviz writer MEB BCviz-
./BCviz writer MBB BCviz 1 1
```

If you want to save the output of the algorithm, please type:

```shell
nohup ./BCviz [dataset] [problem_type] [algo_type] ([s_min]) ([t_min]) >> ../log/construct.txt 2>&1 &
```

Then you can view the outputs in the file ``~/BCviz/log/construct.txt``.


## 2. the results.
The algorithm will output the results in the following format:

```shell
[problem_type] [algo_type] [dataset] [s_min] [t_min] [total_time]
```

where ``[total_time]`` is the running time (second) of this algorithm.<br> 

And the index file named ``[dataset]_[problem_type]_[algo_type](_[s_min]_[t_min]).txt`` will be generated in the directory ``~/BCviz/Index-results``.<br> 

### As an example:

If you type:
```shell
./BCviz writer MEB BCviz-
./BCviz writer MBB BCviz 1 1
```
It will output:
```shell
MEB BCviz- writer 3 3 0.15227
MBB BCviz writer 1 1 3.02125
```
Then file "**writer_MEB_BCviz-.txt**" and file "**writer_MBB_BCviz_1_1.txt**" will be generated in the directory ``~/BCviz/Index-results``.<br>



# II. search-BCviz

This code in file "search-BCviz" implements the search algorithms of BCviz called MBS.<br> 
We have compiled the code to 'MBS' with g++ 7.5.0, and you can run it directly.
<br>
Please execute the following procedures within the "~/BCviz/search-BCviz" directory on a Linux system.<br>


## 1. compile and run.

To run the algorithm, first type ``chmod +x MBS`` or enter ``make`` to complie the code.

Then enter the command in the following format:

```shell
./MBS [dataset] [problem_type] [algo_type] [s] [t] ([BCviz_file])
```

where<br> 
``[dataset]`` is a string denoting the name of a dataset, such as `marvel`.<br>
``[problem_type]`` is a string denoting the types of the problem, which can be `MEB`, `MVB`, and `MBB`.<br>
``[algo_type]`` is a string denoting the types of the algorithm, which can be `BCviz`, `BCviz+`, and `BCviz-`.<br>
``[s]`` is an positive integer, which is the threshold on the first vertex set of bipartite graph.<br>
``[t]`` is an positive integer, which is the threshold on the second vertex set of bipartite graph.<br>
``([BCviz_file])`` is an optional string, which is the address of index file. The default value is ``../Index-results/[dataset]_[problem_type]_[algo_type].txt``. <br>


### As an example:

```shell
./MBS writer MEB BCviz- 4 4
./MBS writer MBB BCviz 3 3 ../Index-results/writer_MBB_BCviz_1_1.txt 
```

If you want to save the outputs of the algorithm, please type:

```shell
nohup ./MBS [dataset] [problem_type] [algo_type] [s] [t] ([BCviz_file]) >> ../log/search.txt 2>&1 &
```

Then you can view the output in the file ``~/BCviz/log/search.txt``.


## 2. the results.

The algorithm will output the results in the following format:

```
[problem_type] [algo_type] [dataset] [s] [t] [total_time]
```

where<br> 
``[total_time]`` is the search time (millisecond) of this algorithm.<br>

### As an example:

If you type:
```shell
./MBS writer MEB BCviz- 4 4
./MBS writer MBB BCviz 3 3 ../Index-results/writer_MBB_BCviz_1_1.txt 
```
It will output:
```shell
MEB BCviz- writer 4 4 0.008
MBB BCviz writer 3 3 0.133
```

# III. datasets

You can download the datasets at "https://anonymous.4open.science/r/BCX71Z05-datasets".

Among these datasets, the datasets marvel20, marvel40, marvel60, and marvel80 were obtained by sampling 20%, 40%, 60%, and 80% of the edges from the original marvel dataset. <br>
Similarly, Twitter20, Twitter40, Twitter60, and Twitter80 were derived by sampling from the Twitter dataset.<br>

Please note that the DBLP dataset is compressed as DBLP.tar.xz. To use it, you need to extract it first. 
In a Linux environment, you can extract it with the following command:

```shell
tar -xJvf DBLP.tar.xz
```

All source datasets in the paper can also be found in KONECT (http://konect.cc/).<br>

marvel: http://konect.cc/networks/marvel/ <br>
writer: http://konect.cc/networks/dbpedia-writer/ <br>
BookCrossing: http://konect.cc/networks/bookcrossing_rating/ <br>
Team: http://konect.cc/networks/dbpedia-team/ <br>
Actor-movie: http://konect.cc/networks/actor-movie/ <br>
Twitter: http://konect.cc/networks/munmun_twitterex_ut/ <br>
WikiPedia: https://konect.cc/networks/wiki-en-cat/ <br>
DBLP: http://konect.cc/networks/dblp-author/ <br>

To run certain experimental scripts, the datasets **must be strictly named** as follows:<br>  
**marvel**, **writer**, **BookCrossing**, **Team**, **Actor-movie**, **Twitter**, **WikiPedia**, **DBLP**.<br>


# IV. experiments

This section introduces how to repeat the paper experiments and plot related figures and tables.<br>
Before proceeding with these following experiments, please compile and test the algorithm "BCviz" in folder "construction-BCviz" and algorithm "MBS" in folder "search-BCviz". Please download all datasets from the URL "https://anonymous.4open.science/r/BCX71Z05-datasets" and place them in the directory "~/BCviz/datasets/". Then, use the command `tar -xJvf DBLP.tar.xz` to extract "DBLP.tar.xz" into the file named "DBLP".<br>

The plotting codes are implemented in python 3.11.4 and can be executed on Linux (Ubuntu 22.04.4), Windows 10/11 systems.<br>

The following Python packages are required for plotting:<br>
```
matplotlib 3.8.2
scipy 1.16.1
numpy 1.26.3
seaborn 0.13.2
```
Please note that the experimental figures are generated in large-scale/high-resolution format, and it is recommended to view them in full-screen mode (in the windows 10/11 system) for optimal clarity.<br>

## 1. Index Similarities.
Please finish the experiment "2.IndexConstructionTime" first.<br>

Then, turn to directory "~/BCviz/experiments/1.IndexSimilarities", we can get the following figures and datas of the paper.<br>

### Fig. 8
Run the code "Fig.8.py", and input the absolute path of the BCviz index directory "~/BCviz/Index-results/", for example, "D:/BCviz/Index-results/".<br>
Then, two figures "Marvel-IndexVisulization.jpg" and "WikiPedia-IndexVisulization.jpg" will be generated in current directory.<br>

### Similarity
Run the code "Kendalltua.py", and input some parameters:<br>
1. input the dataset name (e.g. marvel, WikiPedia), <br>
2. input the absolute path of the BCviz index directory "~/BCviz/Index-results/", for example, "D:/BCviz/Index-results/".<br>
Then, it will output the similarilities to the console.<br>


## 2. Index Construction Time.
Here, we can get the following figures and tables of the paper.<br>

### Fig. 9 (24 hours)
(1) To get results of Index Construction Time in a Linux server, please turn to directory "~/BCviz/construct-BCviz" and enter:
```shell
chmod +x index-time.sh
nohup ./index-time.sh > ../experiments/2.IndexConstructionTime/index-time.txt 2>&1 &
```
The file "index-time.txt" will be generated in directory "~\BCviz\experiments\2.IndexConstructionTime".<br>
This experiment will run for **24 hours**. Please wait before proceeding to the next (plotting) step.<br>

(2) To plot the figures, turn to directory "~\BCviz\experiments\2.IndexConstructionTime" and run the program "Fig.9.py".<br>
Three files "MEB-IndexTime.jpg", "MVB-IndexTime.jpg" and "MBB-IndexTime.jpg" will be generated in current directory.<br>


### Table 4
After running "Fig.9.py", the speedup ratios will be displayed on the console.<br>


## 3. Index Sizes.
After proceeding with the experiment "2. Index Construction Time", you can see the index sizes in folder "~/BCviz/Index-results".<br>


## 4. Search Time.
Please finish the experiment "2.IndexConstructionTime" first.<br>
Here, we can get the following figures of the paper.<br>

### Fig. 10 (5 minutes)
(1) To get results of search time in a Linux server, please turn to directory "~/BCviz/search-BCviz" and enter:
```shell
chmod +x search-time.sh
nohup ./search-time.sh > ../experiments/4.SearchTime/search-time.txt 2>&1 &
```
Then, the file "search-time.txt" will be generated in directory "~\BCviz\experiments\4.SearchTime".<br>
This experiment will run for **5 minutes**. Please wait before proceeding to the next (plotting) step.<br>

(2) To plot the figures, turn to directory "~\BCviz\experiments\4.SearchTime" and run program "Fig.10.py".<br>
Three figures "MEB-search-time.jpg", "MVB-search-time.jpg" and "MBB-search-time.jpg" will be generated in current directory.<br>


### Fig. 11 (10 minutes)
(1) To get results of Search Time with varied parameters in a Linux server, please turn to directory "~/BCviz/search-BCviz" and enter:
```shell
chmod +x varied-search-time.sh
nohup ./varied-search-time.sh > ../experiments/4.SearchTime/varied-search-time.txt 2>&1 &
```
Then, the file "varied-search-time.txt" will be generated in directory "~\BCviz\experiments\4.SearchTime".<br>
This experiment will run for **10 minutes**. Please wait before proceeding to the next (plotting) step.<br>

(2) To plot the figures, turn to directory "~\BCviz\experiments\4.SearchTime" and run program "Fig.11.py".<br>
Two figures "Writers-varied-search-time.jpg" and "WikiPedia-varied-search-time.jpg" will be generated in current directory.<br>


## 5. Overall Performance.
Please finish the experiment "2.IndexConstructionTime" first.<br>
And enter the following command in directory "~\BCviz\experiments\5.OverallPerformance" to get index time:
```shell
cp ../2.IndexConstructionTime/index-time.txt ./
```

Here, we can get the following figure of the paper.<br>

### Fig.12 (1 hour or 7 days)
(1) To get the experimental results in a Linux server, please turn to the directory "~/BCviz/search-BCviz" and type some commands.<br>
There are two schemes, and you can select either one to obtain the results:<br>

Scheme 1. (approximate experiment with **1 hours**)<br>
First type:
```shell
chmod +x multiple-queries.sh
nohup ./multiple-queries.sh > multiple-queries.txt 2>&1 &
```

**1 hours** later, the file "multiple-queries.txt" will be generated in current directory, then type:
```shell
chmod +x data-collation
nohup ./data-collation > ../experiments/5.OverallPerformance/total-time.txt 2>&1 &
```

Then, the file "total-time.txt" will be generated in directory "~\BCviz\experiments\5.OverallPerformance".<br>

Scheme 2. (total experiment with around **7 days**)<br>
First type:
```shell
chmod +x multiple-queries-total.sh
nohup ./multiple-queries-total.sh > multiple-queries-total.txt 2>&1 &
```

**7 days** later, the file "multiple-queries-total.txt" will be generated in current directory, then type:
```shell
chmod +x data-collation-total
nohup ./data-collation-total > ../experiments/5.OverallPerformance/total-time.txt 2>&1 &
```

Then, the file "total-time.txt" will be generated in directory "~\BCviz\experiments\5.OverallPerformance".<br>

(2) To plot the figures, turn to the directory "~\BCviz\experiments\5.OverallPerformance" and run the program "Fig.12.py".<br>
Three figures "MEB-total-time.jpg", "MVB-total-time" and "MBB-total-time.jpg" will be generated in current director.<br>


## 6. Scalability.
Here, we can get the following figure of the paper.<br>

### Fig. 13 (1.2 hours)
(1) To get the experimental results in a Linux server, please turn to the directory "~/BCviz/construct-BCviz", and enter the following command:
```shell
chmod +x scalability.sh
nohup ./scalability.sh > ../experiments/6.Scalability/scalability.txt 2>&1 &
```
Then, the file "scalability.txt" will be generated in directory "~\BCviz\experiments\6.Scalability".<br>
This experiment will run for **1.2 hours**. Please wait before proceeding to the next (plotting) step.<br>

(2) To plot the figures, turn to the directory "~\BCviz\experiments\6.Scalability" and run the program "Fig.13.py".<br>
Two figures "Marvel-scalability.jpg" and "WikiPedia-scalability.jpg" will be generated in current director.<br>


